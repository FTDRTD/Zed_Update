# Zed Editor 自动更新程序

一个功能完整的 Zed 编辑器自动更新工具，支持定时检查、自动下载和安装最新版本。

## 🚀 主要功能

### 核心功能
- **自动版本检查**: 定期检查 GitHub 上的最新版本
- **智能下载**: 自动下载适合 Windows 的版本
- **安全更新**: 创建备份后安装新版本
- **定时调度**: 支持自定义时间和频率的自动检查
- **图形界面**: 用户友好的 GUI 配置界面
- **强制下载**: 支持无视版本差异，总是下载最新版本

### 高级特性
- **系统托盘**: 最小化到托盘，后台运行
- **开机自启**: 可选的开机自动启动
- **备份管理**: 自动备份旧版本，可配置保留数量
- **代理支持**: 支持 HTTP/HTTPS 代理
- **日志记录**: 详细的操作日志
- **通知提醒**: 更新可用和完成时的系统通知

## 📦 安装说明

### 系统要求
- Windows 10/11
- Python 3.7 或更高版本
- 网络连接（用于检查和下载更新）

### 快速安装
1. 下载或克隆本项目
2. 运行安装脚本：
   ```bash
   python install.py
   ```
3. 按照向导完成安装配置

### 手动安装
1. 安装 Python 依赖：
   ```bash
   pip install -r requirements.txt
   ```
2. 运行程序：
   ```bash
   python main.py
   ```

## 🎯 使用方法

### 图形界面模式
```bash
python main.py --gui
# 或者双击 ZedUpdater.bat
```

### 命令行模式
```bash
# 仅检查并更新
python main.py --update

# 显示帮助
python main.py --help
```

### 系统服务模式
程序可以在后台运行，定期自动检查更新。

## ⚙️ 配置选项

### 基本设置
- **Zed 安装路径**: Zed.exe 文件的完整路径
- **自动检查**: 是否启用定期检查
- **检查间隔**: 检查更新的时间间隔（小时）
- **自动下载**: 发现更新时自动下载
- **自动安装**: 下载完成后自动安装（谨慎使用）
- **总是下载最新版本**: 无需版本检查，直接下载最新版本（推荐）

### 定时设置
- **定时更新**: 在指定时间执行检查
- **执行时间**: 24小时格式 (如：02:00)
- **执行天数**: 选择一周中的哪些天执行

### 高级设置
- **代理配置**: HTTP/HTTPS 代理设置
- **超时设置**: 下载超时时间
- **重试次数**: 失败时的重试次数
- **备份管理**: 备份文件的数量限制

## 📁 文件结构

```
D:\Vs\Zed_Update\
├── main.py              # 主程序入口
├── install.py           # 安装脚本
├── uninstall.py         # 卸载脚本
├── requirements.txt     # Python依赖
├── config.json          # 配置文件
├── zed_updater.log      # 日志文件
├── updater/             # 核心模块
│   ├── __init__.py
│   ├── config.py        # 配置管理
│   ├── updater.py       # 更新逻辑
│   ├── scheduler.py     # 定时调度
│   └── gui.py           # 图形界面
├── ZedUpdater.bat       # GUI启动脚本
├── ZedUpdate.bat        # 命令行更新脚本
└── ZedUpdateSilent.bat  # 静默更新脚本
```

## 🛠️ 配置文件示例

```json
{
    "zed_install_path": "D:\\Zed.exe",
    "auto_check_enabled": true,
    "check_interval_hours": 24,
    "auto_download": true,
    "auto_install": false,
    "backup_enabled": true,
    "backup_count": 3,
    "scheduled_update_enabled": true,
    "scheduled_time": "02:00",
    "scheduled_days": [0, 1, 2, 3, 4],
    "show_notifications": true,
    "minimize_to_tray": true,
    "github_repo": "TC999/zed-loc",
    "download_timeout": 300
}
```

## 🔧 常见问题

### Q: 如何更改 Zed 的安装路径？
A: 在图形界面的"基本设置"选项卡中修改路径，或直接编辑 `config.json` 文件。

### Q: 程序无法检查更新怎么办？
A: 检查网络连接，确认防火墙没有阻止程序访问网络。如果使用代理，请在"高级设置"中配置。

### Q: 如何设置开机自启动？
A: 在安装时选择开机自启动，或在"基本设置"中勾选相应选项。

### Q: 更新失败如何恢复？
A: 程序会自动创建备份，可以在 Zed 安装目录的 `zed_backups` 文件夹中找到备份文件。

### Q: 如何完全卸载程序？
A: 运行 `python uninstall.py` 或使用 Windows 控制面板卸载。

## 🎨 界面预览

### 主界面
- 版本信息显示
- 一键检查更新
- 立即更新按钮
- 启动 Zed 按钮
- 更新进度显示

### 设置界面
- 基本设置：路径、自动更新选项
- 定时设置：计划任务配置
- 高级设置：网络、代理、日志
- 日志查看：实时日志显示

## 🚨 注意事项

### 安全提醒
- **自动安装功能**: 建议仅在测试环境中启用，生产环境建议手动确认
- **备份重要性**: 程序会自动备份，但建议定期备份重要配置
- **网络安全**: 所有下载都通过 HTTPS 进行，确保传输安全

### 使用建议
- 首次使用时建议先手动测试更新流程
- 定期检查日志文件，确保程序正常运行
- 根据需要调整检查频率，避免过于频繁的网络请求

## 🔄 更新日志

### v1.0.0 (2024-01-01)
- 🎉 初始版本发布
- ✅ 支持自动检查和更新 Zed 编辑器
- ✅ 完整的图形用户界面
- ✅ 定时任务调度功能
- ✅ 备份和恢复机制
- ✅ 系统托盘集成
- ✅ 开机自启动支持

## 🤝 贡献指南

欢迎提交问题报告和功能请求！

### 开发环境搭建
1. 克隆项目
2. 安装开发依赖：`pip install -r requirements.txt`
3. 运行测试：`python -m pytest`

### 提交 Pull Request
1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 创建 Pull Request

## 📜 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件。

## 📞 支持与反馈

- **问题报告**: 请在 GitHub Issues 中提交
- **功能建议**: 欢迎在 Issues 中讨论
- **技术交流**: 可通过项目主页联系

## 🙏 致谢

- 感谢 Zed 团队开发的优秀编辑器
- 感谢所有贡献者的支持和反馈
- 特别感谢开源社区的各种工具和库

---

**免责声明**: 本工具为第三方开发，与 Zed 官方无关。使用前请确保了解相关风险。